public class Solution {
    public long GetDescentPeriods(int[] prices) {
        int start = 0, len = prices.Length;
        long res = 0;
        if(len == 1)
            return 1;

        for(int i = 1; i < len; i++)
        {
            int diff = prices[i-1]-prices[i];
            if(diff != 1 || i == len-1)
            {
                long gap = i-start;
                
                if(diff != 1)
                {
                    res += (gap+1)*gap/2;

                    if(i == len-1)
                        res++;
                }
                else
                {
                    gap++;
                    res += (gap+1)*gap/2;
                }

                start = i;
            }
        }

        return res;
    }
}
