public class Solution {
    public bool IsPrime(int n)
    {
        if(n < 2) return false;
        for(int i = 2; i * i <= n; i++)
        {
            if(n % i == 0) return false;
        }
        return true;
    }
    public int DivideProduct(int n)
    {
        int totalDivideProduct = 0;
        for(int i = 2; i * i <= n; i++)
        {
            while(n%i==0) 
            {
                n/=i;
                totalDivideProduct += i;
            }

        }
        if(n > 1) totalDivideProduct += n;
        return totalDivideProduct;
    }
    public int SmallestValue(int n) {
        HashSet<int> seen = new HashSet<int>(); // Lưu các giá trị đã tính
        int result = DivideProduct(n);
        
        while(!IsPrime(result) && !seen.Contains(result)) 
        {
            seen.Add(result); // Thêm vào set để tránh lặp lại
            result = DivideProduct(result);
        }
        
        return result;
    }
}
