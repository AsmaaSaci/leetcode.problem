public class Solution {
    public string SmallestStringWithSwaps(string s, IList<IList<int>> pairs) {
        char[] ans = s.ToArray();
Dictionary<int, List<int>> d = new Dictionary<int, List<int>>();
for (int i = 0; i < pairs.Count; i++)
{
    if (d.ContainsKey(pairs[i][0])) d[pairs[i][0]].Add(pairs[i][1]);
    else d.Add(pairs[i][0], new List<int>() { pairs[i][1] });
    if (d.ContainsKey(pairs[i][1])) d[pairs[i][1]].Add(pairs[i][0]);
    else d.Add(pairs[i][1], new List<int>() { pairs[i][0] });
}
bool[] seen = new bool[s.Length];
bool[] seen1 = new bool[s.Length];
foreach (int k in d.Keys)
{
    if (!seen1[k])
    {
        Console.WriteLine();
        seen = new bool[s.Length];
        seen[k] = true;
        Queue<int> q = new Queue<int>();
        q.Enqueue(k);
        while (q.Count > 0)
        {
            int x = q.Dequeue();
            for (int i = 0; i < d[x].Count; i++)
            {
                if (!seen[d[x][i]]) { q.Enqueue(d[x][i]); seen[d[x][i]] = true; }
            }
        }
        List<int> c = new List<int>();
        List<char> b = new List<char>();
        for (int i = 0; i < s.Length; i++)
        {
            if (seen[i]) { seen1[i] = true; c.Add(i); b.Add(s[i]); }
        }
        b.Sort();
        for (int i = 0; i < c.Count; i++)
        {
            ans[c[i]] = b[i];
        }
    }
}
string ans1 = "";
for (int i = 0; i < s.Length; i++)
{
    ans1 += ans[i];
}
return ans1;
    }
}
