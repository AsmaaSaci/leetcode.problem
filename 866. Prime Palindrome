public class Solution {
    public int PrimePalindrome(int n) {
        while (true) {
            if (IsPalindrome(n) && IsPrime(n)) return n;
            n++;

            // Optimization: skip even-length palindromes > 11
            if (n > 11 && IsEvenLength(n)) 
                n = (int)Math.Pow(10, n.ToString().Length);
        }
    }

    private bool IsPalindrome(int x) {
        var s = x.ToString();
        int i = 0, j = s.Length - 1;
        while (i < j) {
            if (s[i++] != s[j--]) return false;
        }
        return true;
    }

    private bool IsPrime(int x) {
        if (x < 2) return false;
        if (x == 2) return true;
        if (x % 2 == 0) return false;
        int sqrt = (int)Math.Sqrt(x);
        for (int i = 3; i <= sqrt; i += 2) {
            if (x % i == 0) return false;
        }
        return true;
    }

    private bool IsEvenLength(int x) {
        return x.ToString().Length % 2 == 0;
    }
}
