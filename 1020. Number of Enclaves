public class Solution {
     public int NumEnclaves(int[][] grid)
 {
     var n = grid.Length;
     var m = grid[0].Length;
     for (var j = 0; j < m; j++)
     {
         if (grid[0][j] == 1)
         {
             Dfs(0, j, grid);
         }
         if (grid[n - 1][j] == 1)
         {
             Dfs(n - 1, j, grid);
         }
     }
     for (var i = 0; i < n; i++)
     {
         if (grid[i][0] == 1)
         {
             Dfs(i, 0, grid);
         }
         if (grid[i][m - 1] == 1)
         {
             Dfs(i, m - 1, grid);
         }
     }
     var count = 0;
     for (var i = 0; i < n; i++)
     {
         for (var j = 0; j < m; j++)
         {
             if (grid[i][j] == 1)
             {
                 count++;
             }
         }
     }
     return count;
 }

 private void Dfs(int i, int j, int[][] grid)
 {
     var n = grid.Length;
     var m = grid[0].Length;
     if (i == -1 || i == n || j == -1 || j == m)
     {
         return;
     }
     if (grid[i][j] == 0)
     {
         return;
     }
     grid[i][j] = 0;
     var y = new int[] { 0, 0, 1, -1 };
     var x = new int[] { 1, -1, 0, 0 };
     for (var k = 0; k < 4; k++)
     {
         Dfs(i + y[k], j + x[k], grid);
     }
 }
}
