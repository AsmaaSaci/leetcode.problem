public class Solution {
    public int NumSubarraysWithSum(int[] nums, int goal) {
        int l = nums.Length;
        if(l == 1)
        {
            return nums[0] == goal ? 1 : 0;
        }

        // Solution 1:
        // int sum = 0;
        // int count = 0;
        // int prevSum = 0;
        // for(int i = 0; i <= l - 1; i++)
        // {
        //     prevSum = 0;
        //     for(int j = i; j <= l - 1; j++)
        //     {
        //         sum = prevSum + nums[j];
        //         if(sum == goal)
        //         {
        //             count++;
        //         }else if(sum > goal)
        //         {
        //             break;
        //         }
        //         prevSum = sum;
        //     }
        // }
        // return count;

        // Solution 2:
        // int[] arr = new int[l + 1];
        // for (int i = 0; i < l; i++) {
        //     arr[i + 1] = arr[i] + nums[i];
        // }
        // Dictionary<int, int> dict = new Dictionary<int, int>();
        // dict[0] = 1;
        // int count = 0;
        // for (int i = 0; i < l; i++) {
        //     count += dict.GetValueOrDefault(arr[i + 1] - goal, 0);
        //     if (dict.ContainsKey(arr[i + 1]))
        //         dict[arr[i + 1]] = dict[arr[i + 1]] + 1;
        //     else
        //         dict[arr[i + 1]] = 1;
        // }      
        // return count;


        // Solution 3:
        int[] arrSum = new int[l + 1];
        int sum = 0;
        int count = 0;
        for (int i = 0; i < l; i++) {
            sum += nums[i];

            if (sum == goal) 
                count++;

            if (sum >= goal) 
                count += arrSum[sum - goal];

            arrSum[sum]++;
        }
        return count;
    }
}
