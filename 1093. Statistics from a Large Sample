public class Solution {
    public double[] SampleStats(int[] count) {
        double[] res = new double[5];
        long totalCnt = 0, sum = 0;
        int len = count.Length;
        int[] range = [-1, -1, -1];
        for(int i = 0; i < len; i++)
        {
            int cur = count[i];
            if(cur > 0)
            {
                sum += (long)i*cur;
                if(range[0] == -1)
                    range[0] = i;

                range[1] = i;
                if(range[2] == -1)
                    range[2] = i;
                else if(count[range[2]] < cur)
                    range[2] = i;
            }

            totalCnt += cur;
        }

        int mid = (int)totalCnt/2 + (totalCnt%2 == 1 ? 1 : 0);
        int p1 = -1, p2 = -1;
        for(int i = range[0]; i <= range[1]; i++)
        {
            int cur = count[i];
            if(cur > 0)
            {
                mid -= count[i];
                if(mid == 0)
                    p1 = i;
                else if(mid < 0)
                {
                    if(p1 == -1)
                        p1 = i;

                    p2 = i;
                }
            }

            if(p2 >= 0)
                break;
        }

        double meanV = (double)sum/totalCnt;
        res[0] = range[0];
        res[1] = range[1];
        res[2] = meanV;
        res[3] = (totalCnt %2 == 1 ? p1 : (double)(p1+p2)/2);
        res[4] = range[2];

        return res;
    }
}
