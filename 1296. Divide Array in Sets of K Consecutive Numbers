public class Solution {
    public bool IsPossibleDivide(int[] nums, int k) {
        if(nums.Length % k != 0) return false;
        var map = new SortedDictionary<int, int>();
        foreach (var num in nums)
            if(!map.TryAdd(num, 1)) map[num]++;

        while (map.Count > 0) {
            var key = map.First().Key;
            if (map[key] == 0) continue;
            for (var i = key; i < key + k; i++) {
                if (!map.TryGetValue(i, out var value)) return false;
                map[i] = --value;
                if (value == 0) map.Remove(i);
            }
        }
        return true;
    }
}
