public class Solution {
    public int MaxNumberOfFamilies(int n, int[][] reservedSeats) {
        var reservedDictionary = new Dictionary<int,bool[]>();
        foreach (var reservedSeat in reservedSeats) {
            var seat = reservedSeat[1];
            if (seat != 1 && seat != 10) {
                var row = reservedSeat[0];
                if (!reservedDictionary.ContainsKey(row))
                    reservedDictionary[row] = new bool[4];
                reservedDictionary[row][seat/2-1] = true;
            }
        }
        return reservedDictionary.Values.Count(RoomForOneFamily) + 2*(n-reservedDictionary.Count());
        
        bool RoomForOneFamily(bool[] occupied) {
            return occupied[1] ? !(occupied[2] || occupied[3]) : !(occupied[2] && occupied[0]);
        }
    }
}
