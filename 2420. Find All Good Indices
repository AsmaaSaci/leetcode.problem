public class Solution {
    public IList<int> GoodIndices(int[] nums, int k) {
        // pre-cal left keep decreasing/right keep increasing cnt:
        int len = nums.Length;
        List<int> res = new();
        if (len < k * 2 + 1)
            return res;

        int[] leftDecCnt = Enumerable.Repeat(1, len).ToArray(), rightIncCnt = Enumerable.Repeat(1, len).ToArray();

        for (int i = 0; i < len; i++)
        {
            if (i > 0 && nums[i] <= nums[i - 1])
                leftDecCnt[i] = leftDecCnt[i - 1] + 1;
        }

        for (int i = len - 1; i >= 0; i--)
        {
            if (i < len-1 && nums[i] <= nums[i + 1])
                rightIncCnt[i] = rightIncCnt[i + 1] + 1;
        }

        for(int i = k; i < len-k; i++)
        {
            if(leftDecCnt[i-1] >= k && rightIncCnt[i+1] >= k)
                res.Add(i);
        }

        return res;
    }
}
