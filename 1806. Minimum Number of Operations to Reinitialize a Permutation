public class Solution {
    public int ReinitializePermutation(int n) {
        int[] origArr = Enumerable.Range(0, n).ToArray(), perm = Enumerable.Range(0, n).ToArray();
        int opt = 0;
        bool findAll = false;
        while(!findAll)
        {
            opt++;
            int[] arr = new int[n];
            bool allEq = true;
            for(int i = 0; i < n; i++)
            {
                if(i%2 == 0)
                    arr[i] = perm[i/2];
                else
                    arr[i] = perm[n/2+(i-1)/2];

                if(arr[i] != origArr[i])
                    allEq = false;
            }

            if(allEq)
            {
                findAll = true;
                break;
            }

            Array.Copy(arr, 0, perm, 0, n);
        }

        return opt;
    }
}
