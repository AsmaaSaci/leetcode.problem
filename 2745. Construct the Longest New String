public class Solution {
    private Dictionary<string, int> dict = new();
    private int BackTracking(int pre, int x, int y, int z)
    {
        string key = pre+"#"+x+"#"+y+"#"+z;
        if(dict.ContainsKey(key))
            return dict[key];

        if(pre == 1 && y == 0 || 
          pre != 1 && x == 0 && z == 0)
            return 0;

        int nextLen = 0;
        if (pre == 0)
        {	
            if(x > 0)
                nextLen = Math.Max(nextLen, BackTracking(1, x-1, y, z));

            if(y > 0)
                nextLen = Math.Max(nextLen, BackTracking(2, x, y-1, z));

            if(z > 0)
                nextLen = Math.Max(nextLen, BackTracking(3, x, y, z-1));
        }
        else if (pre == 1)
            nextLen = Math.Max(nextLen, BackTracking(2, x, y-1, z));
        else
        {
            if(x > 0)
                nextLen = Math.Max(nextLen, BackTracking(1, x-1, y, z));

            if(z > 0)
                nextLen = Math.Max(nextLen, BackTracking(3, x, y, z-1));
        }

        dict.Add(key, nextLen+2);
        return dict[key];
    }
    public int LongestString(int x, int y, int z) {
        int res = BackTracking(0, x, y, z);
        return res;
    }
}
